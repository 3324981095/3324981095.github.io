---
title: linux å­¦ä¹ å·¥å…·ä¹‹gcc/g++ gdb
data: 2025-5-12
description: æœ¬æœŸå¸¦æ¥linuxç›¸å…³å·¥å…·ä½¿ç”¨
mathjax: true
swiper_index: 0
cover: 'https://cdn.szyd.fun/2025/04/18/68023ba2b5f06.jpg'
tags:
  - linux
  - gdb
  - gcc/g++
categories:
  - linux
abbrlink: abe87ade
---

# ä¸€ã€gcc g++
## 1.1 è¯­æ³•
1ã€ç¼–è¯‘ä¸€ä¸ªcç¨‹åº
~~~
gcc -o output_file test.c
~~~
* è¯´æ˜ï¼š
	>-o output_file:æŒ‡å®šè¾“å‡ºçš„å¯æ‰§è¡Œæ–‡ä»¶å
	>text.c: cæºæ–‡ä»¶å

2ã€ç¤ºä¾‹
```
gcc -o test test.c
./test.c
```
3ã€ç¼–è¯‘c++ç¨‹åº
~~~
g++ -o hello_cpp hello.cpp
./hello.cpp
~~~
## 2.2  
è®¤è¯†-o
gcc æºæ–‡ä»¶ä¼šæŠŠä»£ç ç¼–è¯‘é“¾æ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ a.out. ä¸æƒ³ç”Ÿæˆé»˜è®¤çš„a.outæ–‡ä»¶ï¼Œæƒ³ç”ŸæˆæŒ‡å®šæ–‡ä»¶ï¼Œå¯ä»¥ ç›´æ¥é€šè¿‡-oé€‰é¡¹å°±è¡Œ
~~~
gcc test.c -o hello
~~~
g++ åŒç†
~~~
g++ my.cpp -o hello
~~~

ğŸ˜†-E å¤„ç†
cè¯­è¨€ä¸­ï¼Œæœ‰ä¸ªæºæ–‡ä»¶å˜æˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œ å³é¢„å¤„ç†-ç¼–è¯‘-æ±‡ç¼–-é“¾æ¥ï¼Œ
ç¬¬ä¸€æ­¥ï¼šé¢„å¤„ç†ï¼Œä¹Ÿæ˜¯é¢„ç¼–è¯‘
> * ä¼šè¿›è¡Œå¤´æ–‡ä»¶å±•å¼€ã€åˆ é™¤æ³¨é‡Šã€æ›¿æ¢å®0*
> * ç›®çš„æ˜¯ç”Ÿæˆä¸€ä¸ªçº¯ç²¹çš„cä»£ç ç¨‹åº
> * ç»è¿‡é¢„å¤„ç†åçš„æ–‡ä»¶åç¼€ä¸º .i

ğŸ˜Š-Sç¼–è¯‘
> * è¯¥æ­¥éª¤ä¼šè¿›è¡Œè¯­æ³•åˆ†æã€è¯æ³•åˆ†æã€è¯­ä¹‰åˆ†æã€ç¬¦å·æ±‡æ€»ç­‰ï¼Œç„¶åå°†åˆæ³•çš„ä»£ç è½¬ä¸ºæ±‡ç¼–ä»£ç 
> * ç¼–è¯‘çš„ç›®çš„æ˜¯è½¬ä¸ºæ±‡ç¼–ä»£ç 
> * ç”Ÿæˆåçš„æ–‡ä»¶åç¼€ä¸º.s*

~~~
gcc -S test.c -o test.s
~~~
ğŸ˜†-cæ±‡ç¼–
> * ä¸»è¦æ˜¯å°†æ±‡ç¼–ä»£ç è½¬æ¢ä¸ºäºŒè¿›åˆ¶ï¼Œå¹¶ç”Ÿæˆç¬¦å·è¡¨*
> * äºŒè¿›åˆ¶æ ¼å¼ä¸º elfï¼Œæ­¤æ—¶vimæŸ¥çœ‹ä¸ºä¹±ç 
> * ç”Ÿæˆçš„æ–‡ä»¶åç¼€ä¸º .o

å¯ä»¥é€šè¿‡-cé€‰é¡¹ä½¿gccåœ¨æ‰§è¡Œå®Œæ±‡ç¼–é˜¶æ®µåå°±åœä¸‹æ¥ï¼ŒæŒ‡å®šä¿å­˜æ–‡ä»¶ä¸ºtest.o
æŸ¥çœ‹ç”Ÿæˆçš„test.oæ–‡ä»¶ï¼Œå¯ä»¥ç”¨readelfã€‚
~~~
gcc -c test.c -o test.o
ls
//æŸ¥çœ‹elfæ ¼å¼çš„æ–‡ä»¶
readelf -a test.o
~~~
ğŸ˜gccé“¾æ¥

~~~
gcc test.c -o myfile //ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ä¸ºmyfile
~~~

âœŒï¸æ¸©é¦¨æç¤ºï¼š
å¦‚æœä½ åœ¨linuxä¸Šå†™ä»£ç åï¼Œä¸çŸ¥é“æ€ä¹ˆä¿å­˜é€€å‡ºï¼ŒæŒ‰ä¸‹Escé”®ï¼Œå†Shift +å†’å·ï¼ˆï¼šï¼‰,å†æŒ‰ wqï¼Œç„¶åæ‰“ä¸‹å›è½¦é”®,å°±ç®—ä¿å­˜ä¿®æ”¹å¹¶ä¸”é€€å‡ºäº†ç¼–è¾‘ç•Œé¢ã€‚


# äºŒ gdbä½¿ç”¨
vim ç¼–å†™ä»£ç ï¼Œgcc/g++ç¼–è¯‘ä»£ç ï¼Œé‚£ä¹ˆgdbè°ƒè¯•ä»£ç ã€‚
~~~
gdb myfile   //è¿›å…¥è°ƒè¯•
~~~
### l æŸ¥çœ‹ä»£ç 
l 10 è¡¨ç¤ºä»ä»£ç ç¬¬ä¸€è¡Œå¼€å§‹æŸ¥çœ‹å…¶å‰å10è¡Œ
~~~
(gdb) l 10
(gdb) l //é»˜è®¤å‰10è¡Œ
~~~
### é€€å‡ºè°ƒè¯•
~~~
(gdb) q
~~~
### rè¿è¡Œç¨‹åº
~~~
(gdb) r //è¿è¡Œç¨‹åº
~~~

rå°±ç›¸å½“äºf5

### bæ–­ç‚¹æ“ä½œ
~~~
(gdb) b è¡Œå·
(gdb) b å‡½æ•°å //åœ¨æŒ‡å®šå‡½æ•°å¤„æ‰“æ–­ç‚¹
~~~

### æŸ¥çœ‹æ–­ç‚¹ä¿¡æ¯
æŒ‡ä»¤ info bå¯ä»¥æœç´¢æ‰€æœ‰æ–­ç‚¹ï¼Œå¹¶å±•ç¤ºå…¶è¯¦ç»†ä¿¡æ¯
~~~
info b
~~~
### å–æ¶ˆæ–­ç‚¹

æƒ³å–æ¶ˆæ–­ç‚¹ï¼Œå¯é€šè¿‡ d æ–­ç‚¹ç¼–å·ï¼Œå–æ¶ˆæŒ‡å®šæ–­ç‚¹
~~~
(gdb) d 1
~~~

### så•æ­¥è°ƒè¯•
å•æ­¥è°ƒè¯•ç±»ä¼¼äºvsä¸­çš„f11,ä¸åŒäºå•è¡Œè°ƒè¯•ï¼Œå•æ­¥è°ƒè¯•èƒ½è¿›å…¥å‡½æ•°å†…éƒ¨ã€‚æŒ‡ä»¤ä¸ºs.
~~~
(gdb) s
~~~
### until æŒ‡å®šè¡Œ
~~~
(gdb) util 12 //è¡¨ç¤ºè·³è½¬åˆ°æŒ‡å®šè¡Œ
~~~

### æŸ¥çœ‹å˜é‡
è°ƒè¯•è¿‡ç¨‹ä¸­å°‘ä¸äº†æŸ¥çœ‹å˜é‡ä¿¡æ¯ï¼Œç±»ä¼¼äºvsä¸­çš„ç›‘è§†çª—å£ã€‚
btæŸ¥çœ‹è°ƒç”¨å †æ ˆ
~~~
(gdb)bt
~~~
### pä¸´æ—¶æŸ¥çœ‹å˜é‡
~~~
(gdb) på˜é‡
~~~

æ³¨æ„ï¼špåªèƒ½åšåˆ°ä¸´æ—¶ç›‘è§†ï¼Œå½“æ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤åï¼ŒåŸæ¥ç›‘è§†çš„å˜é‡å°±çœ‹ä¸åˆ°äº†ã€‚
### displayå¸¸æ˜¾ç¤ºå˜é‡
gdbä¹Ÿæ”¯æŒä¸€ç›´ç›‘è§†å˜é‡ï¼Œä½¿ç”¨æŒ‡ä»¤display
~~~
diaplay å˜é‡ 
~~~
å¦‚æœä¸çŸ¥é“ç¨‹åºä¸­æœ‰å“ªäº›å˜é‡ï¼Œå¯ä»¥éšæ—¶éšåœ°çš„é€šè¿‡æŒ‡ä»¤  l  æŸ¥çœ‹ï¼Œè¿™ç§æŸ¥çœ‹å¼çš„æŒ‡ä»¤ï¼Œæ˜¯ä¸ä¼šå½±å“åˆ°å…¶ä»–æŒ‡ä»¤è¿è¡Œçš„ã€‚
### cæ–­ç‚¹
ä¹‹å‰çš„ræ— æ³•å®ç°ä¸¤ä¸ªæ–­ç‚¹é—´çš„è·³è½¬ï¼Œå› æ­¤æœ‰ä¸ªä¸“é—¨çš„å‘½ä»¤è¿›è¡Œæ–­ç‚¹è·³è½¬ã€‚ï¼ˆé¦–å…ˆéœ€è¦é€šè¿‡ræŒ‡ä»¤æŠŠç¨‹åºè·‘èµ·æ¥ï¼‰

## ä¸‰ã€make&&makefileçš„ä½¿ç”¨
å…ˆåˆ›å»ºä¸ªtext.cæ–‡ä»¶ ç„¶åè®©ä»–æŒ‡å‘makefile
```
touch test.c
ls ->makefile
```
ç„¶åvim makefileï¼Œåœ¨é‡Œé¢è¾“å…¥ä»¥ä¸‹å†…å®¹
```
mytest:mytest.c
  gcc -o $@ $^ -std=c99
.PHONY:clean
clean:
  rm -f mytest
```
å¦‚æœæƒ³è¦å®ç°åˆ†å±å†™ï¼Œå…ˆç‚¹å‡»<font color=#FF0FF size=3 face=â€œé»‘ä½“â€>Esc ,shift+ :(å†’å·)</font>ï¼Œå†è¾“å…¥ä»¥ä¸‹å†…å®¹å³å¯
```
vs æ–‡ä»¶
```

***

æ€»ç»“
ä»¥ä¸Šå°±æ˜¯linuxå·¥å…·ï¼Œå¦‚æœ‰ä¸å¯¹çš„åœ°æ–¹è¯·æŒ‡æ­£ï¼